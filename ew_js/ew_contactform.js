!function(e){e.fn.simpleContactForm=function(t){return t=e.extend({errorClass:"error",senderEmail:"",subject:"New message from your website",url:"",type:"POST",clearAfterSend:!0,success:function(){alert("Email sent!")}},t),e(this).each((function(){var a=e(this);"localhost"!==location.hostname&&"127.0.0.1"!==location.hostname&&""!==location.hostname&&"file:"!==location.protocol||e("#recaptcha").html("<div style='font-family:Roboto,helvetica,arial,sans-serif;font-size:14px;line-height:16px;padding: 10px 20px;text-align:center;color:red;border-radius:6px;border:1px solid #c0c0c0;background-color:#ededed;'>Publish your website to test the SPAM Captcha</div>"),e(a).find(".btnSubmit").click((function(s){var i,l,r,n,o=!1,d=t.senderEmail,c=t.url,p="",u="",h=0,m=0,f=!1,b=e(this);if(e(".tmpdata").remove(),e(b).attr("disabled","disabled"),a.is("[action]")&&(c=a.attr("action")),a.find('label[data-required="required"]').each((function(){var a=(l=e(this)).attr("for"),s=!1;e(this).siblings("input[type='checkbox'][data_section='"+a+"']").each((function(){e(this).is(":checked")&&(s=!0)})),e(this).siblings("input[type='radio'][name='"+a+"']").each((function(){e(this).is(":checked")&&(s=!0)})),e(this).siblings("select[name='"+a+"']").each((function(){console.log(e(this)[0].selectedIndex);var t=e(this)[0].hasAttribute("multiple");console.log(t),e(this)[0].selectedIndex>0&&(s=!0)})),s?(l.parent().css({border:"",padding:"",margin:"","border-radius":""}),l.removeClass(t.errorClass)):(o=!0,l.addClass(t.errorClass),l.parent().css({border:"2px solid #ff5c33",padding:"5px",margin:"5px","border-radius":"6px"}))})),a.find("input,textarea,select").each((function(){if(r="","submit"!=this.type){if(i=e(this),n="",p=i.attr("id"),u=i.attr("type"),l=null,a.find("label").each((function(){if("checkbox"==u||i.is("select")&&void 0!==i.attr("multiple")&&!1!==i.attr("multiple")){if(i.attr("data_section")==e(this).attr("for"))return l=e(this),r=l.text().trim(),!1}else if(e(this).attr("for")==i.attr("id")||e(this).attr("for")==i.attr("name"))return l=e(this),r=l.text().trim(),!1})),i.removeClass(t.errorClass),p||(p=i.attr("name")),null!=l&&l.removeClass(t.errorClass),i.is("select"))n=i.find(":selected").val();else if("checkbox"==u)n=i.is(":checked")?"true":"false";else if("radio"==u)n=i.is(":checked")?"true":"false";else if("file"==u)r="",this.files.length>0&&(n=this.files[0].name,h+=parseInt(this.files[0].size),f=!0,m++);else if("text"==u&&i.hasClass("dpicker")){var s=i.attr("name");hiddenEl=i.siblings(':input[type="hidden"][name="dtpic_'+s+'_submit"]'),n=hiddenEl.val()}else n=i.val();!i.is(".required")||null!=n&&0!=n.length||(o=!0,i.addClass(t.errorClass),null!=l&&l.addClass(t.errorClass)),i.is(".required")&&"checkbox"==u&&"false"==n&&(o=!0,null!=l&&l.addClass(t.errorClass)),i.is(".required")&&"radio"==u&&"false"==n&&(o=!0,null!=l&&l.addClass(t.errorClass)),(i.is(".email")||i.is(".senderEmail")||"email"==u)&&(function(e){if("-1"!=e.indexOf("@")&&"-1"!=e.indexOf(".")&&""!=e&&2==e.split("@").length)return!0}(n)||(o=!0,i.addClass(t.errorClass),null!=l&&l.addClass(t.errorClass))),i.is(".senderEmail")&&(d=i.val()),i.is(".email")&&""==d.length&&(d=i.val()),"email"==u&&""==d.length&&(d=i.val()),""!=r&&(n=encodeURIComponent(n),"*"==(r=encodeURIComponent(r)).slice(-1)&&(r=r.substring(0,r.length-1)),p="","checkbox"==u||i.is("select")&&void 0!==i.attr("multiple")&&!1!==i.attr("multiple")?e(a).append('<input class="tmpdata" type="hidden" name="'+e(this).attr("data_section")+'_label" value="'+r+'"/>'):"hidden"!=u&&"checkbox"!=u&&e(a).append('<input class="tmpdata" type="hidden" name="'+e(this).attr("name")+'_label" value="'+r+'"/>'))}})),o)e(a).find(".validation-error").show(),e(b).removeAttr("disabled"),e(".tmpdata").remove();else{if(e(".validation-error").hide(),"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname||"file:"===location.protocol)return alert("The contact form must be published online to send."),e(b).removeAttr("disabled"),e(".tmpdata").remove(),!1;e(a).find(".required").each((function(t,s){e(a).find(".reqFieldsHelper").remove(),e(a).append('<input type="hidden" class="reqFieldsHelper tmpdata" name="reqFields[]" value="'+e(s).attr("name")+'" />')}));var v=e(a).find(".upload_progress"),g=e(a).find(".bar"),x=e(a).find(".percent"),C=e(a).find(".progress"),y="0%";g.width(y),x.html(y),e(a).append('<input class="tmpdata" type="hidden" name="emailSubject" value="'+t.subject+'" />'),e(a).append('<input class="tmpdata" type="hidden" name="emailSender" value="'+d+'" />'),e(a).append('<input class="tmpdata" type="hidden" name="numfiles" value="'+m+'" />'),e.post(c,e(a).serialize()+"&required_size="+h+"&required_size_label=",(function(s){if(!s.success)return resultMessage=s.message,""==resultMessage&&(resultMessage="Service temporarily unavailable"),alert(resultMessage),e(b).removeAttr("disabled"),e(".tmpdata").remove(),!1;!f||s.can_submit&&s.can_upload||(f=!1,console.log("Unable to upload file because the file is too large."),e(a).find("input[type=file]").attr("disabled","disabled"),alert("The file(s) could not be uploaded because the file(s) are too large.")),e(a).append('<input class="tmpdata" type="hidden" name="can_upload" value="'+s.can_upload+'" />'),e(a).append('<input class="tmpdata" type="hidden" name="can_submit" value="'+s.can_submit+'" />');var i=h+parseInt(s.space_used),l=parseInt(s.submissions_used)+1;e(a).append('<input class="tmpdata" type="hidden" name="submissions_quota" value="'+s.submissions_quota+'" />'),e(a).append('<input class="tmpdata" type="hidden" name="submissions_used" value="'+l+'" />'),e(a).append('<input class="tmpdata" type="hidden" name="space_used" value="'+i+'" />'),e(a).append('<input class="tmpdata" type="hidden" name="space_quota" value="'+s.space_quota+'" />'),e(a).ajaxSubmit({url:c,beforeSend:function(){f&&(y="0%",g.width(y),x.html(y),e(C).show(),e(v).show())},uploadProgress:function(e,t,a,s){f&&(y=s+"%",g.width(y),x.html(y))},complete:function(s){e(a).find(".upload_progress").hide(),e(a).find("input[type=file]").removeAttr("disabled"),e(b).removeAttr("disabled");try{var i=e.parseJSON(s.responseText)}catch(t){return console.log(s),console.log(s.responseText),console.log(t),alert("An error occurred while sending the form. The response could not be read. Check the error console for more details."),e(b).removeAttr("disabled"),e(".tmpdata").remove(),!1}if(i.success){var l="100%";g.width(l),x.html(l),t.clearAfterSend&&(e(a).resetForm(),e(".tmpdata").remove(),e(".g-recaptcha").length&&grecaptcha&&grecaptcha.reset()),t.success()}else alert(i.message),i.log&&console.log(i.log),e(C).hide()}})}),"json").fail((function(e,t,a){alert("An error occurred while sending the contact form. Check the developer console for errors"),console.log(e),console.log(e.responseText),console.log(t),console.log(a)}))}return!1}))})),e(this)}}(jQuery);